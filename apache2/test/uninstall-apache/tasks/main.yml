---
- name: Stop Apache2 service
  ansible.builtin.service:
    name: apache2
    state: stopped
  ignore_errors: yes  # Continue even if service doesn't exist

- name: Uninstall Apache2 and purge configurations
  ansible.builtin.apt:
    name: apache2
    state: absent
    purge: yes         # Remove config files
    autoremove: yes    # Remove unused dependencies
    autoclean: yes     # Clean package cache

- name: Remove index.html file
  ansible.builtin.file:
    path: /var/www/html/index.html
    state: absent
